<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css_files/post.css">
        <link rel="icon" href="images/fihh.png">
        <title>Home</title>
    </head>
    


    <body>
        <header id="top">
        <div class="header-left">
        <a href="index.html">Home</a>
        <span class="separator">|</span>
        <a href="addPost.html">addPost</a>

        </div>
        <a class="logo" href="#"><img src="images/fihh.png" width="50" height="50" alt="My picture"></a>
        </header>

        <!---Posts-->
        <main class ="feed" id="feed"></main>
        <script>
            let req = new XMLHttpRequest();

            req.onreadystatechange = () => {
                if (req.readyState == XMLHttpRequest.DONE) {
                    displayPosts(JSON.parse(req.responseText).record);
                }
            };

            req.open("GET", "https://api.jsonbin.io/v3/b/69037131d0ea881f40c744d9/latest", true);
            req.setRequestHeader("X-Master-Key", "$2a$10$KffUlUzBpxLkdUPDqx9NNeU2wXxlZJxlPLsQfVZ9J9fu9Zyx7fQhm");
            req.send();

            function displayPosts(posts) {
                var i;
                var t = "";
                for(i = 0; i < posts.length; i++) {
                    t = t.concat('<div class="post">\n\
                        <div class="post-header">\n\
                        <img class="profile-pic" src="' + posts[i].profilePic + '" alt="Profile picture">\n\
                        <span class="post-date">' + posts[i].date + '</span>\n\
                        </div>\n\
                        <div class="post-content">\n\
                        <img src="' + posts[i].memePic + '" alt="Sample image">\n\
                        <p>' + posts[i].comment + '</p>\n\
                        </div>\n\
                        <div class="post-footer">\n\
                        <span class="likes">' + posts[i].likes + '</span>\n\
                        </div>\n\
                        </div>\n');
                }
                document.getElementById("feed").innerHTML = t;
            }
        </script>

        <footer>
            <a href="#top">Scroll back up</a>


        </footer>



    </body>
</html>